<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.antonio.example.springtddmybatis.mapper.PersonMapper">
    <insert id="save"></insert>

    <select id="findByCpf" resultType="com.antonio.example.springtddmybatis.model.Person">
        select * from person where cpf = #{cpf}
        <!--        SELECT * FROM PERSON WHERE CPF = #{cpf}-->
    </select>

    <select id="findByTelephoneDddAndTelephoneNumber" resultType="com.antonio.example.springtddmybatis.model.Person">
        <include refid="sqlFindByTelephoneDddAndTelephoneNumber"></include>
        WHERE T.ddd = #{ddd}
        AND T.number = #{number}
    </select>

    <sql id="sqlFindByTelephoneDddAndTelephoneNumber">
        SELECT
        P.id AS id, P.cpf AS cpf, P.name AS name
        FROM PERSON P
        INNER JOIN TELEPHONE T ON T.person_id = P.id
    </sql>
    <!--        t.id AS t_id, t.ddd AS t_ddd, t.number AS t_number,-->

</mapper>